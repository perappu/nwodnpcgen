<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery UI Tabs - Vertical Tabs functionality</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    
    <!-- data -->
    <script type="text/javascript" src="changelingtraits.js"></script>
    <script type="text/javascript" src="personality.js"></script> 
    <script type="text/javascript" src="names.js"></script> 
    
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
 
<h1>NWoD Quick NPC Generator</h1>
 
    <div class="container">
        <div class="col1">
            <div id="tabs">
                  <ul>
                    <li><a href="#mortal">Mortal</a></li>
                    <li><a href="#vampire">Vampire</a></li>
                    <li><a href="#werewolf">Werewolf</a></li>
                    <li><a href="#mage">Mage</a></li>
                    <li><a href="#changeling">Changeling</a></li>
                    <li><a href="#hunter">Hunter</a></li>
                    <li><a href="#genius">Genius</a></li>
                    <li><a href="#princess">Princess</a></li>
                  </ul>
                  <div id="mortal">
                    <h2>Mortal</h2>
                    
                    <button id="mortalButton">Generate</button>
                    
                  </div>
                  <div id="vampire">
                    <h2>Vampire</h2>
                    
                    <button id="vtrButton">Generate</button>
                  </div>
                  <div id="werewolf">
                    <h2>Werewolf</h2>
                    
                    <button id="wtfButton">Generate</button>
                  </div>
                  <div id="mage">
                    <h2>Mage</h2>
                    
                    <button id="mtaButton">Generate</button>
                  </div>
                  <div id="changeling">
                    <h2>Changeling</h2>
                    
                    <input type="checkbox" id="includeCTLHomebrew"/> Include Homebrew
                    
                    <div id="checkboxList">
                        <label>Court Options:</label>
                        <ul>
                            <li><input type="checkbox" id="includeSeasonalCourts"/> Seasonal</li>
                            <li><input type="checkbox" id="includeDirectionalCourts"/> Directional</li>
                            <li><input type="checkbox" id="includeDayNightCourts"/> Day/Night</li>
                            <li><input type="checkbox" id="includeTransitionalCourts"/> Transitional</li>
                            <li><input type="checkbox" id="includeCourtless"/> Courtless</li>
                        </ul>
                    </div>
                    
                    <button id="ctlButton">Generate</button>
                    
                  </div>
                  <div id="hunter">
                    <h2>Hunter</h2>
                    
                    <button id="htvButton">Generate</button>
                  </div>
                  <div id="genius">
                    <h2>Genius</h2>
                    
                    <button id="gttButton">Generate</button>
                  </div>
                  <div id="princess">
                    <img src="http://i3.kym-cdn.com/photos/images/facebook/000/926/954/795.png" style="width: 100%;">
                  </div>
            </div>
        </div>
        
        
        <div class="col2">
        <div id="result">
        Press a generate button to make stuff appear here!
        </div>
        
        <div id="resultCopyable">
            <button id="toggleTextareaButton">Plaintext</button>
            <textarea id="resultTextarea">Press a generate button to make stuff appear here!</textarea>
        
        </div>
        
        </div>
        </div>
        
        <div class="footer">
        by <a href="http://twitter.com/stokori">stokori</a> - <a href="https://github.com/stokori/nwodnpcgen">source code</a> - <a href="http://worldofdarkness.wikia.com/wiki/Quick_NPCs_(nWoD)">quick npc reference</a>
        </div>
 
</body>

<script>
        $( function() {
            $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
            $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
             
            $("#toggleTextareaButton").click(function(){
                $("#resultTextarea").slideToggle();
            });
            
        } );
        
        //put a number between 1 and 5 to represent the npc's rank
        function getRank() {
            return Math.floor(Math.random()*5) + 1;
        }
        
        //return a name comprised of a first + last name
        function getName() {
            return firstNames[Math.floor(Math.random()*firstNames.length)] + " " + lastNames[Math.floor(Math.random()*lastNames.length)] ;
        }
        
        //return string of 3 random personality traits
        function getPersonality() {
        
            personality = [];
        
            for (i = 0; i < 3; i++) {
            
                trait = personalityTraits[Math.floor(Math.random()*personalityTraits.length)];
            
                while(personality.includes(trait)) {
                    trait = personalityTraits[Math.floor(Math.random()*personalityTraits.length)];
                }
                
                personality.push(trait);
            
            }
        
            return personality[0] + ", " + personality[1] + ", " + personality[2];
        }
        
        //returns some json with values that apply to every splat
        function getBasicStats(template) {
        
            npc = {};
        
            //pick a name
            name = getName();
            npc["Name"] = { 'value' : name, 'define' : false };
            
            //pick a template
            npc["Template"] = { 'value' : template, 'define' : false };
            
            //pick a specialty
            specialties = ["Mental","Physical","Social"];
            specialty = specialties[Math.floor(Math.random()*specialties.length)];
            npc["Specialty"] = { 'value' : specialty, 'define' : false };
            
            //pick a rank
            rank = getRank();
            npc["Rank"] = { 'value' : rank, 'define' : false };
            
            //pick a personality
            personality = getPersonality();
            npc["Personality"] = { 'value' : personality, 'define' : false };
            
            return npc;
        
        }
        
        function generateHTML(npc) {
        
            npchtml = "";
            
            for (var key in npc) {
                
                if(npc[key]['define'] == true) {
                    //if the value has a definition set we need to make sure it'll make a popup thingy
                    
                } else {
                
                    npchtml = npchtml.concat("<b>" + key + ":</b> " + npc[key]['value'] + "<br>");
                
                }
            }
            
            return npchtml;
        
        }
        
        function generatePlainText(npc) {
        
            plaintext = "";
            
            for (var key in npc) {
            
                plaintext = plaintext.concat(key + ": " + npc[key]['value'] + "\n");
            
            }
        
            return plaintext;
        
        }
        
        function mortal() {
            
            //clear previous results
            output = "";
            $("#result").html(output);
            
            npc = getBasicStats("Mortal");
            
            //MORTAL SPECIFIC STUFF HERE
            
            output = generateHTML(npc);
            
            $("#result").html(output);
            
            //copyable option
            plaintext = generatePlainText(npc);
                
            $("textarea#resultTextarea").html(plaintext);
            
        }
        
        function vampire() {

            //clear previous results
            output = "";
            $("#result").html(output);
            
            npc = getBasicStats("Vampire");
            
            //VAMPIRE SPECIFIC STUFF HERE
            clans = ["Daeva","Gangrel","Mekhet","Nosferatu","Ventrue"];
            clan = clans[Math.floor(Math.random()*clans.length)];
            npc['Clan'] = { 'value' : clan, 'define' : false };
            
            output = generateHTML(npc);
            $("#result").html(output);
            
            //copyable option
            plaintext = generatePlainText(npc);
            $("textarea#resultTextarea").html(plaintext);
        
        }
        
        function werewolf() {
        
            //clear previous results
            output = "";
            $("#result").html(output);
            
            npc = getBasicStats("Werewolf");
            
            //WEREWOOF SPECIFIC STUFF HERE
            auspices = ["Rahu","Cahalith","Elodoth","Ithaeur","Irraka"];
            auspice = auspices[Math.floor(Math.random()*auspices.length)];
            npc['Auspice'] = { 'value' : auspice, 'define' : false };
            
            output = generateHTML(npc);
            $("#result").html(output);
            
            //copyable option
            plaintext = generatePlainText(npc);
            $("textarea#resultTextarea").html(plaintext);
            
        }
        
        function mage() {
        
            //clear previous results
            output = "";
            $("#result").html(output);
            
            npc = getBasicStats("Mage");
            
            //MAGE SPECIFIC STUFF HERE
            paths = ["Acanthus", "Mastigos", "Moros", "Obrimos", "Thyrsus", "The Unknown Tower"];
            path = paths[Math.floor(Math.random()*paths.length)];
            npc['Path'] = { 'value' : path, 'define' : false };
            
            orders = ["Adamantine Arrow", "Free Council", "Guardians of the Veil", "Mysterium", "Silver Ladder", "Seers of the Throne", "Banishers", "The Mad", "Apostate"];
            order = orders[Math.floor(Math.random()*orders.length)];
            npc['Order'] = { 'value' : order, 'define' : false };
            
            output = generateHTML(npc);
            $("#result").html(output);
            
            //copyable option
            plaintext = generatePlainText(npc);
            $("textarea#resultTextarea").html(plaintext);

        }
        
        function changeling() {
        
            //clear previous results
            output = "";
            $("#result").html(output);
            
            //pick a name
            name = getName();
            output = output + "<b>Name:</b> " + name + "<br>";
            
            //pick a seeming
            seemings = Object.keys(changelings);
            seeming = seemings[Math.floor(Math.random()*seemings.length)];
            output = output + "<b>Seeming:</b> " + seeming + "<br>";

            //pick a kith
            kiths = Object.keys(changelings[seeming]);
            kith = kiths[Math.floor(Math.random()*kiths.length)];
            
            //TODO: this is bad and should be fixed
            if(!$("#includeCTLHomebrew").is(':checked')) {
                while (kith.search("(hb)") != -1) {
                     kith = kiths[Math.floor(Math.random()*kiths.length)];
                }
            }
            
            output = output + "<b>Kith:</b> " + kith + " <a href='#' id='kithDefine'>?</a> <br>";
            
            kithDescription = changelings[seeming][kith];
            output = output + "<div id='kithDescription' title='" + kith + "'>" + kithDescription + "</div>";

            //pick a court
            courts = [];
            if($("#includeSeasonalCourts").is(':checked'))
                courts.push("Autumn","Spring","Summer","Winter");
            if($("#includeDirectionalCourts").is(':checked'))
                courts.push("North","East","South","West");
            if($("#includeDayNightCourts").is(':checked'))
                courts.push("Sun","Moon");
            if($("#includeTransitionalCourts").is(':checked'))
                courts.push("Dawn","Dusk");
            if($("#includeCourtless").is(':checked'))
                courts.push("Courtless");
                
            //in case someone decides not to pick anything    
            //lowkey hate how ugly this is, javascript why    
            
            court = courts[Math.floor(Math.random()*courts.length)];
            if(typeof court === "undefined")
                court = "";
            output = output + "<b>Court:</b> " + court + "<br>";
            
            //pick a specialty
            specialties = ["Mental","Physical","Social"];
            specialty = specialties[Math.floor(Math.random()*specialties.length)];
            output = output + "<b>Specialty:</b> " + specialty + "<br>";
            
            //pick a rank
            rank = getRank();
            output = output + "<b>Rank:</b> " + rank + "<br>";
            
            $("#result").html(output);
            
            //copyable option
            plaintext = "Name: " + name + "\n" +
                "Seeming: " + seeming + "\n" +
                "Kith: " + kith + "\n" +
                "Court: " + court + "\n" +
                "Specialty: " + specialty + "\n" +
                "Rank: " + rank;
                
            $("textarea#resultTextarea").html(plaintext);
            
            $( "#kithDefine" ).click(function() {
                $( "#kithDescription" ).dialog({
                  modal: true,
                  width: 'auto',
                  create: function( event, ui ) {
                    // Set maxWidth
                    $(this).css("maxWidth", "400px");
                    },
                  show: {
                    effect: "blind",
                    duration: 1000
                  },
                  hide: {
                    effect: "blind",
                    duration: 1000
                    }
                });
                $( "#kithDescription" ).dialog( "open" );
            });
            
        }
        
        function hunter() {
        
            //clear previous results
            output = "";
            $("#result").html(output);
            
            npc = getBasicStats("Hunter");
            
            //HUNTER SPECIFIC STUFF HERE
            
            output = generateHTML(npc);
            
            $("#result").html(output);
            
            //copyable option
            plaintext = generatePlainText(npc);
                
            $("textarea#resultTextarea").html(plaintext);
        
        }
        
        function genius() {
        
            //clear previous results
            output = "";
            $("#result").html(output);
            
            npc = getBasicStats("Genius");
            
            //GENIUS SPECIFIC STUFF HERE
            catalysts = ["Grimm","Hoffnung","Klagen","Neid","Staunen"];
            catalyst = catalysts[Math.floor(Math.random()*catalysts.length)];
            npc['Catalyst'] = { 'value' : catalyst, 'define' : false };
            
            output = generateHTML(npc);
            $("#result").html(output);
            
            //copyable option
            plaintext = generatePlainText(npc);
            $("textarea#resultTextarea").html(plaintext);
        
        }
        
        $(document).ready(function(){ 
        
            $("#mortalButton").click(function(){ mortal(); });
            $("#vtrButton").click(function(){ vampire(); });
            $("#wtfButton").click(function(){ werewolf(); });
            $("#mtaButton").click(function(){ mage(); }); 
            $("#ctlButton").click(function(){ changeling(); }); 
            $("#htvButton").click(function(){ hunter(); });
            $("#gttButton").click(function(){ genius(); }); 
            
            
        });
        
    </script>

</html>